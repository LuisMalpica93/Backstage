apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: csch-pyta-refreshtoken
  description: This service provides a refresh token to obtain a new access token when the current one expires.
  annotations:
    backstage.io/techdocs-ref: dir:.
spec:
  type: openapi
  lifecycle: production
  owner: team-authentication
  definition: "openapi: 3.0.1\ninfo:\n  title: CSCH-PYTA-RefreshToken\n  description: This service provides a refresh token to obtain a new access token when the current one expires. The contract is based on BIAN version 11\n  version: 1.0.0\nservers:\n  - url: wso2.apiman.invex\n    description: Dev\npaths:\n  /api/v1/CrossChannel/PartyAuthentication/Update:\n    post:\n      summary: RqCR - Request a Customerâ€™s Authentication Update\n      description: This endpoint allows you to update or retrieve a new refresh token for the user\n      parameters:\n        - name: Authorization\n          in: header\n          schema:\n            type: string\n            description: Application token\n            example: 77128ffa-6201-3c4a-939a-e5d0b2343b29\n        - name: Content-Type\n          in: header\n          schema:\n            type: string\n            example: application/json\n        - name: Accept\n          in: header\n          schema:\n            type: string\n            example: application/json\n      requestBody:\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/TokenRequest'\n      responses:\n        '200':\n          description: Successful authentication response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/AuthTokenResponse'\n        '400':\n          $ref: '#/components/responses/BadRequest'\n        '401':\n          $ref: '#/components/responses/Unauthorized'\ncomponents:\n  schemas:\n    TokenRequest:\n      type: object\n      properties:\n        refreshToken:\n          type: string\n          description: The refresh token used to request a new access token.\n    AuthToken:\n      type: object\n      properties:\n        accessToken:\n          type: string\n          description: JWT access token for authentication\n        refreshToken:\n          type: string\n          description: Refresh token to obtain a new access token\n    AuthTokenResponse:\n      type: object\n      properties:\n        authToken:\n          $ref: '#/components/schemas/AuthToken'\n  responses:\n    BadRequest:\n      description: BadRequest\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/HTTPError'\n    Unauthorized:\n      description: Unauthorized\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/HTTPError'"
